#include <iostream>
 using namespace std;
 const int MAX=20;
 int b[MAX][MAX];
 int n;
 int ns=0;
 bool isSafe(int r,int c){
 for(int i=0;i<r;i++)
  if(b[i][c]==1)
       return false;
 for(int i=r-1,j=c-1;i>=0 && j>=0;i--,j--) 
   if(b[i][j]==1)
   return false;
 for(int i=r-1,j=c+1;i>=0 && j<n;i--,j++)
   if(b[i][j]==1)
   return false;
   return true;
   }
 void printBoard(){
   cout<<"Solution "<<ns<<":\n";
   for(int i=0;i<n;i++){
   for(int j=0;j<n;j++){
     if(b[i][j]==1)
       cout<<"Q";
     else
       cout<<". ";
       }
         cout<<"\n";
         }
           cout<<"\n";
      }
 void placeQueens(int r){
   if(r==n){
     ns++;
     printBoard();
     return;
     }
    for(int col=0;col<n;col++){
       if(isSafe(r,col)){
         b[r][col]=1;
            placeQueens(r+1);
         b[r][col]=0;
         }
}
    }
 int main(){
 cout<<"Enter the size of the board (n): ";
 cin>>n;
 if(n>MAX){
 cout<<"Please enter n <= "<<MAX<<"\n";
 return 1;
 }
 for(int i=0;i<n;i++){
   for(int j=0;j<n;j++){
     b[i][j]=0;
     }
     }
          placeQueens(0);
 cout<<"Total number of solutions:  "<<ns<<"\n";
 return 0;
 }   
